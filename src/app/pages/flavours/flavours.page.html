<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      <ion-icon name="cafe"></ion-icon>
      Coffee Flavours
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="logout()" fill="clear">
        <ion-icon name="log-out"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Coffee Flavours</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="page-content">
    <!-- Category Filter -->
    <div class="category-filter">
      <ion-chip 
        *ngFor="let category of categories" 
        [color]="selectedCategory === category ? 'primary' : 'medium'"
        (click)="selectCategory(category)"
        [class.selected]="selectedCategory === category">
        {{ formatCategoryName(category) }}
      </ion-chip>
    </div>

    <!-- Coffee Grid -->
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="6" size-lg="4" *ngFor="let flavour of availableFlavours">
          <ion-card [class.unavailable]="!flavour.available" (click)="selectCoffee(flavour)">
            <ion-card-header>
              <ion-card-title>
                {{ flavour.name }}
                <ion-badge [color]="flavour.available ? 'success' : 'medium'" slot="end">
                  {{ flavour.available ? 'Available' : 'Sold Out' }}
                </ion-badge>
              </ion-card-title>
            </ion-card-header>

            <ion-card-content>
              <p class="description">{{ flavour.description }}</p>
              
              <div class="coffee-details">
                <div class="detail-row">
                  <span class="label">Origin:</span>
                  <span class="value">{{ flavour.origin }}</span>
                </div>
                
                <div class="detail-row">
                  <span class="label">Roast:</span>
                  <span class="value">{{ flavour.roastLevel | titlecase }}</span>
                </div>
                
                <div class="detail-row">
                  <span class="label">Intensity:</span>
                  <div class="stars">
                    <ion-icon 
                      *ngFor="let filled of getIntensityStars(flavour.intensity)" 
                      name="star" 
                      [class.filled]="filled">
                    </ion-icon>
                  </div>
                </div>
                
                <div class="detail-row price-row">
                  <span class="label">Price:</span>
                  <span class="price">${{ flavour.price.toFixed(2) }}</span>
                </div>
              </div>

              <ion-button 
                expand="block" 
                [disabled]="!flavour.available"
                [color]="flavour.available ? 'primary' : 'medium'"
                class="select-button">
                {{ flavour.available ? 'Select Coffee' : 'Unavailable' }}
              </ion-button>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Empty state -->
    <div *ngIf="availableFlavours.length === 0" class="empty-state">
      <ion-icon name="cafe" size="large"></ion-icon>
      <h2>No coffee available</h2>
      <p>Sorry, no coffee flavours are available in this category at the moment.</p>
    </div>
  </div>
</ion-content>
